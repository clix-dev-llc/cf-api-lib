{
    "defines": {
        "constants": {
            "name": "Codefresh",
            "description": "Codefresh API client",
            "protocol": "https",
            "host": "cf-cd.codefresh.io",
            "pathPrefix": "api",
            "port": 443,
            "dateFormat": "YYYY-MM-DDTHH:MM:SSZ",
            "requestFormat": "json",
            "requestMedia": "application/json"
        },
        "response-headers": [],
        "request-headers": [
            "x-access-token"
        ],
        "params": {
            "id": {
                "type": "Number",
                "required": true,
                "validation": "",
                "invalidmsg": "",
                "description": "Mongo ObjectId"
            }
        }
    },

    "user": {
        "get": {
            "url": "/user",
            "method": "GET",
            "roles": ["User"]
        }
    },

    "repos": {
        "get-settings": {
            "url": "/repos/settings/:repoOwner/:repoName",
            "method": "GET",
            "roles": ["User"],
            "params": {
                "repoOwner": {
                    "type": "String",
                    "required": true,
                    "invalidmsg": "",
                    "description": ""
                },
                "repoName": {
                    "type": "String",
                    "required": true,
                    "invalidmsg": "",
                    "description": ""
                }
            }
        },
        "set-settings": {
            "url": "/repos/settings",
            "method": "POST",
            "roles": ["User"],
            "params": {
                "repoOwner": {
                    "type": "String",
                    "required": true,
                    "invalidmsg": "",
                    "description": ""
                },
                "repoName": {
                    "type": "String",
                    "required": true,
                    "invalidmsg": "",
                    "description": ""
                },
                "settings": {
                    "type": "Json",
                    "required": true,
                    "invalidmsg": "",
                    "description": ""
                }
            }
        }
    },

    "images": {
        "get-all": {
            "url": "/runtime",
            "method": "GET",
            "roles": ["Admin"]
        }
    },

    "progress": {
        "get-from-index": {
            "url": "/progress/:id/:index",
            "method": "GET",
            "roles": ["User"],
            "params": {
                "index": {
                    "type": "Number",
                    "required": false,
                    "invalidmsg": "",
                    "description": "index from above it progress logs will be returned"
                },
                "$id": null
            }
        }
    },

    "runtime": {
        "code": {
            "url": "/runtime/codeit",
            "method": "POST",
            "roles": ["User"],
            "progress": {
                "section": "progress",
                "route": "getFromIndex",
                "allStates": ["success", "error", "terminating", "terminated", "running"],
                "successStates": ["success"],
                "failStates": ["error", "terminated"],
                "finishStates": ["success", "error", "terminated"]
            },
            "params": {
                "repoOwner": {
                    "type": "String",
                    "required": true,
                    "validation": "",
                    "invalidmsg": "",
                    "description": ""
                },
                "repoName": {
                    "type": "String",
                    "required": true,
                    "validation": "",
                    "invalidmsg": "",
                    "description": ""
                },
                "repoData": {
                    "type": "JSON",
                    "required": true,
                    "validation": "",
                    "invalidmsg": "",
                    "description": ""
                },
                "sha": {
                    "type": "String",
                    "required": false,
                    "validation": "",
                    "invalidmsg": "",
                    "description": ""
                },
                "branch": {
                    "type": "String",
                    "required": false,
                    "validation": "",
                    "invalidmsg": "",
                    "description": ""
                }
            }
        },
        "launch": {
            "url": "/runtime/testit",
            "method": "POST",
            "roles": ["User"],
            "progress": {
                "section": "progress",
                "route": "getFromIndex",
                "allStates": ["success", "error", "terminating", "terminated", "running"],
                "successStates": ["success"],
                "failStates": ["error", "terminated"],
                "finishStates": ["success", "error", "terminated"]
            },
            "params": {
                "repoOwner": {
                    "type": "String",
                    "required": true,
                    "validation": "",
                    "invalidmsg": "",
                    "description": ""
                },
                "repoName": {
                    "type": "String",
                    "required": true,
                    "validation": "",
                    "invalidmsg": "",
                    "description": ""
                },
                "repoData": {
                    "type": "JSON",
                    "required": true,
                    "validation": "",
                    "invalidmsg": "",
                    "description": "JSON that contains url field with https and ssh"
                },
                "sha": {
                    "type": "String",
                    "required": false,
                    "validation": "",
                    "invalidmsg": "",
                    "description": ""
                },
                "branch": {
                    "type": "String",
                    "required": false,
                    "validation": "",
                    "invalidmsg": "",
                    "description": ""
                }
            }
        }
    }
}